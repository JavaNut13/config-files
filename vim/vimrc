" Pug installed
filetype off
let __filepath = expand("~/.pug/source/vim/pug")
execute 'source '.fnameescape(__filepath)
" Line numbers and relative numbers
set relativenumber
set number

" Leader as space key
let mapleader=" "

" Allow backspace in more locations
set backspace=indent,eol,start

" Disable line wrap
set nowrap

" Change syntax based on file types
syntax on
filetype plugin indent on 
colorscheme lemon-orchard

" 2 space indent is life
set tabstop=2
set shiftwidth=2
set expandtab

" Split character the same as tmux
set fillchars+=vert:│
set laststatus=2
set showtabline=2

" Enable ctrl-p
let g:ctrlp_user_command = ['.git', 'cd %s && git ls-files . -co --exclude-standard', 'find %s -type f']
" Shortcuts for common operations
let g:ctrlp_map = '<leader>f'

" nREPL support
" Requires CIDER-nREPL to be installed in lein
" Add this to the user profile: [cider/cider-nrepl "0.14.0"]
nnoremap <leader>e :Eval<CR>
nnoremap <leader>E :%Eval<CR>

noremap <leader>p :set paste!<CR>

" Allow for buffers in the background
set hidden

" jk as escape in insert mode
inoremap jk <Esc>
inoremap Jk <Esc>
inoremap JK <Esc>

" C-n, C-p to switch tabs
nnoremap <silent> <C-n> :bn<CR>
nnoremap <silent> <C-p> :bp<CR>
nnoremap <silent> <C-x> :bd<CR>:bn<CR>
nnoremap Y y$

" Open new splits in the 'other' location
set splitbelow
set splitright

" Highlight line for keeping under 80 chars
set colorcolumn=81
set cursorline

" Some other stuff
set visualbell

" Show a menu for command completions
set wildmenu

" Don't redraw as much
set lazyredraw

" lightline stuff

set noshowmode

let g:lightline = {
\   'colorscheme': 'jellybeans',
\   'active': {
\     'left':[ [ 'mode', 'paste' ],
\              [ 'readonly', 'filename', 'modified' ]
\     ]
\   },
\ }
let g:lightline.separator = {
\   'left': '', 'right': ''
\}
let g:lightline.subseparator = {
\   'left': '', 'right': ''
\}
let g:lightline.tabline          = {'left': [['buffers']], 'right': []}
let g:lightline.component_expand = {'buffers': 'lightline#bufferline#buffers'}
let g:lightline.component_type   = {'buffers': 'tabsel'}

" Syntastic settings
set statusline+=%#warningmsg#
set statusline+=%{SyntasticStatuslineFlag()}
set statusline+=%*

let g:syntastic_always_populate_loc_list = 1
let g:syntastic_auto_loc_list = 0
let g:syntastic_check_on_open = 1
let g:syntastic_check_on_wq = 0
let g:syntastic_auto_jump = 0
let g:syntastic_enable_signs = 0

" Load config for this device
let __filepath = expand("~/.vimrc-local")
if filereadable(__filepath)
  execute 'source '.fnameescape(__filepath)
endif


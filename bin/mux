#!/bin/bash
# Usage of this script:
# mux new_session_name
# mux existing_session_name
# mux (will list existing sessions)

name=$1

if [ -z "$name" ]; then
  tmux ls
  exit
fi

if [ "$name" = "." ]; then
  name=${PWD##*/}
fi

matching_shells=$(tmux ls | grep $name)

if [ -n "$matching_shells" ]; then
  exec tmux attach -t $name
else
  exec tmux new -s $name
fi
